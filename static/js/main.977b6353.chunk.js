(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);n(62),n(87);var a=n(0),o=n.n(a),i=n(37),r=n.n(i),s=n(17),c=n.n(s),l=n(23),d=n(24),u=n(26),p=n(25),h=n(27),v=n(10),b=n(1),m=(n(60),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"getObjectUrl",value:function(e){var t=e.replace("https://vk.com/video_ext.php?","");return""===t?null:t.split("&").reduce(function(e,t,n,a){var o=t.split("=");return e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]),e},{})}},{key:"getStringHref",value:function(e){if(-1!==e.indexOf("youtube.com"))return e;var t=this.getObjectUrl(e);return"https://vk.com/video".concat(t.oid,"_").concat(t.id)}},{key:"render",value:function(){var e=this;return this.getObjectUrl("https://vk.com/video_ext.php?oid=-9099896&id=456239279&hash=1b355cbe6355a5dd&__ref=vk.api&api_hash=15543777299b9470af795f99b5cd_GM4TKNJQHE3TG"),console.log(this.props),o.a.createElement(b.Panel,{id:"videos"},o.a.createElement(b.PanelHeader,null),o.a.createElement(b.Search,{value:this.props.search,onChange:this.props.onChange}),o.a.createElement(b.Div,null,o.a.createElement(b.Button,{size:"xl",level:"secondary",onClick:this.props.onButtonHandler},"\u0418\u0441\u043a\u0430\u0442\u044c")),o.a.createElement(b.Group,null),o.a.createElement(b.Group,null,o.a.createElement(b.List,null,this.props.videos.map(function(t,n){return o.a.createElement(b.Cell,{key:n},o.a.createElement(b.Header,null,t.title),o.a.createElement(b.Div,{style:{textAlign:"center"}},o.a.createElement("a",{href:e.getStringHref(t.player)},o.a.createElement("img",{style:{maxWidth:320},alt:"",src:"undefined"==typeof t.photo_800?t.photo_640:t.photo_800}))))}))))}}]),t}(o.a.Component)),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).go=function(e){n.setState({activePanel:e.currentTarget.dataset.to})},n.state={activePanel:"videos",token:null,search:"",videos:[]},n.onChange=n.onChange.bind(Object(v.a)(Object(v.a)(n))),n.onButtonHandler=n.onButtonHandler.bind(Object(v.a)(Object(v.a)(n))),n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;c.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppAccessTokenReceived":e.setState({token:t.detail.data.access_token}),e.getVideos(0);break;case"VKWebAppCallAPIMethodResult":"videos"===t.detail.data.request_id&&e.setState({videos:t.detail.data.response.items});break;default:console.log(t.detail.type)}}),c.a.send("VKWebAppGetAuthToken",{app_id:6923699,scope:"video"})}},{key:"getVideos",value:function(e){var t=this.state.search;c.a.send("VKWebAppCallAPIMethod",{method:"video.search",request_id:"videos",params:{q:t,adult:1,v:"5.92",offset:e,access_token:this.state.token,count:100}})}},{key:"onChange",value:function(e){this.setState({search:e})}},{key:"onButtonHandler",value:function(){this.getVideos(0)}},{key:"render",value:function(){return o.a.createElement(b.View,{activePanel:this.state.activePanel},o.a.createElement(m,{id:"videos",videos:this.state.videos,search:this.state.search,onChange:this.onChange,onButtonHandler:this.onButtonHandler}))}}]),t}(o.a.Component);c.a.send("VKWebAppInit",{}),r.a.render(o.a.createElement(f,null),document.getElementById("root"))},61:function(e,t,n){e.exports=n(110)}},[[61,1,2]]]);
//# sourceMappingURL=main.977b6353.chunk.js.map