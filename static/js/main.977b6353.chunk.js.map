{"version":3,"sources":["panels/Videos.js","App.js","index.js"],"names":["Videos","url","search","replace","split","reduce","prev","curr","i","arr","p","decodeURIComponent","indexOf","obj","this","getObjectUrl","concat","oid","id","_this","console","log","props","react_default","a","createElement","vkui","value","onChange","size","level","onClick","onButtonHandler","videos","map","video","index","key","title","style","textAlign","href","getStringHref","player","maxWidth","alt","src","photo_800","photo_640","React","Component","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","go","e","setState","activePanel","currentTarget","dataset","to","state","token","bind","assertThisInitialized","_this2","connect","subscribe","detail","type","data","access_token","getVideos","request_id","response","items","send","app_id","scope","offset","searchString","method","params","q","adult","v","count","panels_Videos","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.977b6353.chunk.js","sourcesContent":["import React from 'react';\nimport { Panel, PanelHeader, Search, Div, Button, Group, List, Cell, Header } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\n\nclass Videos extends React.Component {\n\n    getObjectUrl(url) {\n        let search = url.replace('https://vk.com/video_ext.php?','')\n        let object_url = ( search === \"\") ? null : search.split(\"&\").reduce(function(prev, curr, i, arr) {\n            let p = curr.split(\"=\");\n            prev[decodeURIComponent(p[0])] = decodeURIComponent(p[1]);\n            return prev;\n        }, {});\n        return object_url\n    }\n\n    getStringHref(url) {\n        if (url.indexOf('youtube.com') !== -1) {\n            return url\n        } else {\n            let obj = this.getObjectUrl(url)\n            return `https://vk.com/video${obj.oid}_${obj.id}`\n        }\n    }\n\n\n\n\trender() {\n\n        this.getObjectUrl('https://vk.com/video_ext.php?oid=-9099896&id=456239279&hash=1b355cbe6355a5dd&__ref=vk.api&api_hash=15543777299b9470af795f99b5cd_GM4TKNJQHE3TG')\n\n        console.log(this.props)\n\n\t\treturn (\n\t\t\t<Panel id=\"videos\">\n                <PanelHeader></PanelHeader>\n                <Search \n                    value={this.props.search} \n                    onChange={this.props.onChange}\n                />\n                <Div>\n                    <Button \n                        size=\"xl\" \n                        level=\"secondary\"\n                        onClick={this.props.onButtonHandler}\n                    >Искать</Button>\n                </Div>\n                <Group>    \n                </Group>\n                <Group>\n                    <List>\n                        {\n                            this.props.videos.map((video, index) => (\n                                <Cell \n                                    key={index}\n                                >\n                                    <Header>{video.title}</Header>\n                                    <Div\n                                        style={{ textAlign : 'center' }}\n                                    >\n                                        <a \n                                            href={this.getStringHref(video.player)}>\n                                            <img \n                                                style={{ maxWidth : 320 }}\n                                                alt=\"\"\n                                                src={(typeof video.photo_800 == 'undefined') ? video.photo_640 : video.photo_800}> \n                                            </img>\n                                        </a>\n                                    </Div>\n                                </Cell>\n                            ))\n                        }\n                    </List>\n                </Group>\n            </Panel>\n\t\t);\n\t}\n}\n\nexport default Videos;\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport { View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Videos from './panels/Videos';\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'videos',\n\t\t\ttoken: null,\n\t\t\tsearch : '',\n\t\t\tvideos : []\n\t\t};\n\n\t\tthis.onChange = this.onChange.bind(this)\n\t\tthis.onButtonHandler = this.onButtonHandler.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({ token : e.detail.data.access_token });\n\t\t\t\t\tthis.getVideos(0)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppCallAPIMethodResult':\n\t\t\t\t\tif (e.detail.data.request_id === \"videos\") {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tvideos : e.detail.data.response.items\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 6923699, \"scope\": \"video\"})\n\t}\n\n\tgetVideos(offset) {\n\t\tlet searchString = this.state.search\n\t\tconnect.send(\"VKWebAppCallAPIMethod\", \n\t\t\t{\n\t\t\t\t\"method\" : \"video.search\", \n\t\t\t\t\"request_id\" : \"videos\", \n\t\t\t\t\"params\" : {\n\t\t\t\t\t\"q\" : searchString,\n\t\t\t\t\t\"adult\" : 1,\n\t\t\t\t\t\"v\":\"5.92\", \n\t\t\t\t\t\"offset\" : offset,\n\t\t\t\t\t\"access_token\": this.state.token,\n\t\t\t\t\t\"count\" : 100\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\n\tonChange (search) { this.setState({ search }); }\n\n\tonButtonHandler() { \n\t\tthis.getVideos(0)\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel}>\n\t\t\t\t<Videos \n\t\t\t\t\tid=\"videos\" \n\t\t\t\t\tvideos={this.state.videos}\n\t\t\t\t\tsearch={this.state.search}\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\tonButtonHandler={this.onButtonHandler}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}